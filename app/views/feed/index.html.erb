<div class="container">
  <!-- 상단 헤더 (native navigation bar, 현재는 native 에서 hidden 처리되어 있음.) -->
<!--  <div class="px-4 py-4 flex items-center justify-between"-->
<!--       data-controller="bridge--button bridge--menu"-->
<!--       data-bridge--button-title-value="메뉴"-->
<!--       data-bridge--button-style-value="plain"-->
<!--       data-bridge--button-position-value="right"-->
<!--       data-bridge--button-action="menu:display"-->
<!--       data-bridge--menu-title-value="설정"-->
<!--       data-bridge--menu-items-value='[{"index": 0, "title": "프로필", "url": "#"}, {"index": 1, "title": "로그아웃", "style": "destructive", "url": "<%#= destroy_user_session_path %>", "method": "delete"}]'>-->
    
    <!-- 웹 브라우저용 메뉴 버튼 (네이티브 앱에서는 숨김) -->
    <%# unless turbo_native_app? %>
<!--      <button data-action="click->bridge--menu#display"-->
<!--              class="px-4 py-2 bg-white text-gray-700 rounded-xl shadow-sm hover:shadow-md transition-all">-->
<!--        메뉴-->
<!--      </button>-->
    <%# end %>
<!--  </div>-->

  <!-- 메인 콘텐츠 -->
  <div class="px-4 py-4 pb-32 min-h-[calc(100dvh-80px)]">
    <% if @recordings&.any? %>
      <!-- 녹음 목록 -->
      <div class="space-y-3">
        <% @recordings.each do |recording| %>
          <div class="bg-white rounded-xl shadow-sm p-4 hover:shadow-md transition-all"
               data-controller="audio-player"
               data-audio-player-url-value="<%= url_for(recording.audio_file) %>"
               data-audio-player-duration-value="<%= recording.audio_file.blob.byte_size %>">
            
            <div class="flex items-center gap-4">
              <!-- 재생/일시정지 버튼 -->
              <button type="button"
                      data-action="click->audio-player#toggle"
                      data-audio-player-target="playButton"
                      class="w-12 h-12 rounded-full bg-gradient-to-br from-[#F5A08D] to-[#FFAA91] shadow-md hover:shadow-lg transform hover:scale-105 active:scale-95 transition-all flex items-center justify-center flex-shrink-0">
                <!-- 재생 아이콘 -->
                <svg class="w-5 h-5 text-white ml-0.5" 
                     data-audio-player-target="playIcon"
                     fill="currentColor" 
                     viewBox="0 0 24 24">
                  <path d="M8 5v14l11-7z"/>
                </svg>
                <!-- 일시정지 아이콘 -->
                <svg class="w-5 h-5 text-white hidden" 
                     data-audio-player-target="pauseIcon"
                     fill="currentColor" 
                     viewBox="0 0 24 24">
                  <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                </svg>
              </button>
              
              <!-- 정보 및 진행 바 -->
              <div class="flex-1 min-w-0">
                <!-- 사용자 정보 -->
                <div class="flex items-center justify-between mb-1">
                  <span class="text-sm font-medium text-gray-700">User #<%= recording.user_id %></span>
                  <span class="text-xs text-gray-500" data-audio-player-target="duration">
                    <%= recording.created_at.strftime("%m/%d %H:%M") %>
                  </span>
                </div>
                
                <!-- 진행 바 -->
                <div class="relative h-1.5 bg-gray-200 rounded-full overflow-hidden mb-1">
                  <div class="absolute h-full bg-gradient-to-r from-[#F5A08D] to-[#FFAA91] transition-all duration-100"
                       data-audio-player-target="progress"
                       style="width: 0%"></div>
                </div>
                
                <!-- 시간 -->
                <div class="flex justify-between text-xs text-gray-500">
                  <span data-audio-player-target="currentTime">0:00</span>
                  <span data-audio-player-target="totalTime">--:--</span>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <!-- 빈 상태 -->
      <div class="flex flex-col items-center justify-center min-h-[calc(100dvh-200px)]">
        <div class="text-center max-w-md">
          <div class="inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-[#FDEBD0] to-[#FFF5E9] shadow-lg mb-6">
            <svg class="w-14 h-14 text-[#F5A08D]" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
          </div>
          
          <h2 class="text-2xl font-semibold text-gray-700 mb-2">음성 녹음을 시작하세요</h2>
          <p class="text-gray-500 mb-8">아래 빨간 버튼을 눌러 첫 녹음을 만들어보세요</p>
        </div>
      </div>
    <% end %>
  </div>

  <!-- 컴팩트 녹음 툴바 -->
  <%= render partial: 'shared/compact_recorder', locals: { submit_url: recordings_path } %>
</div>
